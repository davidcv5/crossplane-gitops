apiVersion: certificatesmanagement.oci.upbound.io/v1alpha1
kind: CertificateAuthority
metadata:
  name: test-certificate-authority
  annotations:
    argocd.argoproj.io/sync-wave: "5"
spec:
  forProvider:
    compartmentId: "ocid1.compartment.oc1..aaaaaaaahkmcqkcdnvjxdykdiai4ncm5f4o3n3gmtbpy6cnvey2nspef6k5a"
    name: test-certificate-authority
    kmsKeyId: "ocid1.key.oc1.iad.example" # Replace with actual KMS key OCID
    certificateAuthorityConfig:
      - configType: ROOT_CA_GENERATED_INTERNALLY
        subject:
          - commonName: "Test Root CA"
            organization: "Test Organization"
            organizationalUnit: "Test Unit"
            country: "US"
            stateOrProvinceName: "California"
            localityName: "San Francisco"
    certificateRevocationListDetails:
      - objectStorageConfig:
          - objectStorageBucketName: "test-crl-bucket"
            objectStorageNamespace: "idwsb3nvxazj"  # Replace with your namespace
            objectStorageObjectNameFormat: "crl-v{}.crl"
        customFormattedUrls:
          - "http://crl.example.com/test-ca.crl"
  providerConfigRef:
    name: default